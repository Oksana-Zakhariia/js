{"mappings":"AA8CA,MAAMA,EAAOC,SAASC,cAAc,SAC9BC,EAAQF,SAASC,cAAc,aAOrC,IAAIE,EAAO,EACM,IAAIC,sBAErB,SAAgBC,EAASC,GACrBD,EAAQE,SAAQC,IACRA,EAAMC,iBACNN,GAAQ,EAYnB,SAAoBO,EAAO,GAQvB,OAAOC,MAAM,uDAA8BD,IAP5B,CACZE,QAAS,CACLC,cAAe,iCAKsCC,MAAMC,IAC/D,IAAKA,EAAKC,GACN,MAAM,IAAIC,MAEd,OAAOF,EAAKG,MAAM,G,CAvBdC,CAAWhB,GAAMW,MAAKM,IAClBrB,EAAKsB,mBAAmB,YAA0BD,EAAKE,KA0BxDC,KAAI,EAACC,KAACA,EAAIC,KAAEA,KACZ,aAAaD,qBAChBC,gBACJC,KAAK,KA5BON,EAAKO,OAASP,EAAKQ,OACnBtB,EAASuB,UAAU3B,EAAM,I,MAhB7B,CACZ4B,KAAM,KACNC,WAAY,QACZC,SAAU,IAKLC,QAAQ/B","sources":["src/index.js"],"sourcesContent":["// const list = document.querySelector('.list');\n// const loadMoreButton = document.querySelector('.load');\n// let page = 1;\n// loadMoreButton.addEventListener('click', onLoadMoreButtonClick);\n\n\n// function myApiRings(page = 1) {\n//     const options = {\n//         headers: {\n//             Authorization: 'Bearer p5x3fafVd7jGFD8nSau5'\n\n//         }\n//     }\n//     const BASE_URL = 'https://the-one-api.dev/v2/character'\n//      return fetch(`${BASE_URL}?limit=400&page=${page}`, options).then((resp) => {\n//         if (!resp.ok) {\n//             throw new Error\n//         }\n//         return resp.json()\n//     })\n// }\n    \n// myApiRings().then((data) => { list.insertAdjacentHTML('beforeEnd', createMarkup(data.docs))\n// }).catch((error)=> console.log(error.statusText))\n\n\n// function createMarkup(arr) {\n//     return arr.map(({name, race }) => {\n//         return ` <li> <h2>${name}</h2>\n//       <h3>${race}</h3></li>`\n//      }).join('')\n// }\n\n// function onLoadMoreButtonClick() {\n//     page += 1;\n//     myApiRings(page).then((data) => {\n//     list.insertAdjacentHTML('beforeEnd', createMarkup(data.docs))\n//         if (data.page === data.pages) {\n//         loadMoreButton.setAttribute('hidden', true)\n//     }\n//     }).catch((err) => { console.log(err) })\n    \n\n\n// }\n\nconst list = document.querySelector('.list');\nconst guard = document.querySelector('.js-guard')\nconst options = {\n    root: null,\n    rootMargin: '200px', \n    treshold: 1.0,\n\n}\nlet page = 0; \nconst observer = new IntersectionObserver(onLoad, options);\nobserver.observe(guard);\nfunction onLoad(entries, observer) {\n    entries.forEach(entry => {\n        if (entry.isIntersecting) {\n            page += 1;\n            myApiRings(page).then(data => {\n                list.insertAdjacentHTML('beforeEnd', createMarkup(data.docs))\n                if (data.page === data.pages) {\n                    observer.unubserve(guard)\n                }\n            })\n        }\n        \n    });\n}\n\n function myApiRings(page = 1) {\n    const options = {\n        headers: {\n            Authorization: 'Bearer p5x3fafVd7jGFD8nSau5'\n\n        }\n    }\n    const BASE_URL = 'https://the-one-api.dev/v2/character'\n     return fetch(`${BASE_URL}?limit=400&page=${page}`, options).then((resp) => {\n        if (!resp.ok) {\n            throw new Error\n        }\n        return resp.json()\n    })\n}\nfunction createMarkup(arr) {\n    return arr.map(({name, race }) => {\n        return ` <li> <h2>${name}</h2>\n      <h3>${race}</h3></li>`\n     }).join('')\n}\n// myApiRings().then((data) => {\n//     list.insertAdjacentHTML('beforeEnd', createMarkup(data.docs))\n//      observer.observe(guard)\n// }).catch((error)=> console.log(error.statusText))\n"],"names":["$1f0dc3b9307be026$var$list","document","querySelector","$1f0dc3b9307be026$var$guard","$1f0dc3b9307be026$var$page","IntersectionObserver","entries","observer1","forEach","entry","isIntersecting","page1","fetch","headers","Authorization","then","resp","ok","Error","json","$1f0dc3b9307be026$var$myApiRings","data","insertAdjacentHTML","docs","map","name","race","join","page","pages","unubserve","root","rootMargin","treshold","observe"],"version":3,"file":"index.c485a8fe.js.map"}