{"mappings":"YA8CA,IAAMA,EAAOC,SAASC,cAAc,SAC9BC,EAAQF,SAASC,cAAc,aAOjCE,EAAO,EACLC,EAAW,IAAIC,sBAErB,SAAgBC,EAASC,GACrBD,EAAQE,SAAQ,SAAAC,GACRA,EAAMC,gBAajB,W,IAAoBC,EAAAC,UAAAC,OAAA,YAAAD,UAAA,GAAQA,UAAA,GAAD,EAClBE,EAAU,CACZC,QAAS,CACLC,cAAe,gCAKtB,OAAOC,MAAM,GAA8BC,OAD3B,uCACS,oBAAuBA,OAALP,GAAQG,GAASK,MAAK,SAACC,GAC/D,IAAKA,EAAKC,GACN,MAAM,IAAIC,MAEd,OAAOF,EAAKG,M,IAvBRC,CADArB,GAAQ,GACSgB,MAAK,SAAAM,GAClB1B,EAAK2B,mBAAmB,YAA0BD,EAAKE,KA0BxDC,KAAI,SAAAC,G,IAAEC,EAAID,EAAJC,KAAMC,EAAIF,EAAJE,KACnB,MAAO,aACHb,OADgBY,EAAK,qBAChBZ,OAALa,EAAK,a,IACTC,KAAK,KA5BOP,EAAKQ,OAASR,EAAKS,OACnB3B,EAAS4B,UAAUjC,E,SAhBvB,CACZkC,KAAM,KACNC,WAAY,QACZC,SAAU,IAKdlC,EAASmC,QAAQrC,E","sources":["src/index.js"],"sourcesContent":["// const list = document.querySelector('.list');\n// const loadMoreButton = document.querySelector('.load');\n// let page = 1;\n// loadMoreButton.addEventListener('click', onLoadMoreButtonClick);\n\n\n// function myApiRings(page = 1) {\n//     const options = {\n//         headers: {\n//             Authorization: 'Bearer p5x3fafVd7jGFD8nSau5'\n\n//         }\n//     }\n//     const BASE_URL = 'https://the-one-api.dev/v2/character'\n//      return fetch(`${BASE_URL}?limit=400&page=${page}`, options).then((resp) => {\n//         if (!resp.ok) {\n//             throw new Error\n//         }\n//         return resp.json()\n//     })\n// }\n    \n// myApiRings().then((data) => { list.insertAdjacentHTML('beforeEnd', createMarkup(data.docs))\n// }).catch((error)=> console.log(error.statusText))\n\n\n// function createMarkup(arr) {\n//     return arr.map(({name, race }) => {\n//         return ` <li> <h2>${name}</h2>\n//       <h3>${race}</h3></li>`\n//      }).join('')\n// }\n\n// function onLoadMoreButtonClick() {\n//     page += 1;\n//     myApiRings(page).then((data) => {\n//     list.insertAdjacentHTML('beforeEnd', createMarkup(data.docs))\n//         if (data.page === data.pages) {\n//         loadMoreButton.setAttribute('hidden', true)\n//     }\n//     }).catch((err) => { console.log(err) })\n    \n\n\n// }\n\nconst list = document.querySelector('.list');\nconst guard = document.querySelector('.js-guard')\nconst options = {\n    root: null,\n    rootMargin: '200px', \n    treshold: 1.0,\n\n}\nlet page = 0; \nconst observer = new IntersectionObserver(onLoad, options);\nobserver.observe(guard);\nfunction onLoad(entries, observer) {\n    entries.forEach(entry => {\n        if (entry.isIntersecting) {\n            page += 1;\n            myApiRings(page).then(data => {\n                list.insertAdjacentHTML('beforeEnd', createMarkup(data.docs))\n                if (data.page === data.pages) {\n                    observer.unubserve(guard)\n                }\n            })\n        }\n        \n    });\n}\n\n function myApiRings(page = 1) {\n    const options = {\n        headers: {\n            Authorization: 'Bearer p5x3fafVd7jGFD8nSau5'\n\n        }\n    }\n    const BASE_URL = 'https://the-one-api.dev/v2/character'\n     return fetch(`${BASE_URL}?limit=400&page=${page}`, options).then((resp) => {\n        if (!resp.ok) {\n            throw new Error\n        }\n        return resp.json()\n    })\n}\nfunction createMarkup(arr) {\n    return arr.map(({name, race }) => {\n        return ` <li> <h2>${name}</h2>\n      <h3>${race}</h3></li>`\n     }).join('')\n}\n// myApiRings().then((data) => {\n//     list.insertAdjacentHTML('beforeEnd', createMarkup(data.docs))\n//      observer.observe(guard)\n// }).catch((error)=> console.log(error.statusText))\n"],"names":["$b8f9b7833fa37166$var$list","document","querySelector","$b8f9b7833fa37166$var$guard","$b8f9b7833fa37166$var$page","$b8f9b7833fa37166$var$observer","IntersectionObserver","entries","observer1","forEach","entry","isIntersecting","page1","arguments","length","options1","headers","Authorization","fetch","concat","then","resp","ok","Error","json","$b8f9b7833fa37166$var$myApiRings","data","insertAdjacentHTML","docs","map","param","name","race","join","page","pages","unubserve","root","rootMargin","treshold","observe"],"version":3,"file":"index.2ac9c99c.js.map"}